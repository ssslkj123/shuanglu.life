<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>20240516_速成SQL | Shuanglu的博客</title>
    <meta property="og:title" content="20240516_速成SQL - Shuanglu的博客">
    <meta property="og:type" content="article">
        
    <meta property="article:published_time" content='2024-05-16T21:55:11&#43;08:00'>
        
        
    <meta property="article:modified_time" content='2024-05-16T21:55:11&#43;08:00'>
        
    <meta name="Keywords" content="[SQL 数据库 mysql]">
    <meta name="description" content="20240516_速成SQL">
        
    <meta name="author" content="Kid">
    <meta property="og:url" content="https://shuanglu.life/post/20240516_SQL%E9%80%9F%E6%88%90/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
        <link href="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" rel="stylesheet">
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
        <link rel="stylesheet" href='/css//css/copy-to-clipboard.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://shuanglu.life/">
                        Shuanglu的博客
                    </a>
                
                <p class="description">运维技术笔记：Kubernetes,Docker,容器,CloudNative等相关</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://shuanglu.life/">首页</a>
                    
                    <a  href="https://shuanglu.life/archives/" title="归档">归档</a>
                    
                    <a  href="https://shuanglu.life/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    

    <article class="post">
        <header>
            <h1 class="post-title">20240516_速成SQL</h1>
        </header>
        <date class="post-meta meta-date">
            2024年5月16日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/SQL'>SQL</a></span>
            
            <span class="meta-category"><a href='/categories/%E6%95%B0%E6%8D%AE%E5%BA%93'>数据库</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">

            <h1 id="速成sqlbase-on-mysql">速成SQL（Base on Mysql）</h1>
<h2 id="一docker-compose-快速拉起mysql-单机实例">一、Docker compose 快速拉起mysql 单机实例</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#998;font-style:italic"># 创建目录</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#998;font-style:italic"># mkdir -p ./.etc ./.data</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#998;font-style:italic"># 容器内mysqld.cnf 文件参数优化：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#998;font-style:italic"># cat .etc/my.cnf</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#000;font-weight:bold">[</span>mysqld<span style="color:#000;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>character-set-server<span style="color:#000;font-weight:bold">=</span>utf8
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>log-bin<span style="color:#000;font-weight:bold">=</span>mysql-bin
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>server-id<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>pid-file        <span style="color:#000;font-weight:bold">=</span> /var/run/mysqld/mysqld.pid
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#008080">socket</span>          <span style="color:#000;font-weight:bold">=</span> /var/run/mysqld/mysqld.sock
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#008080">datadir</span>         <span style="color:#000;font-weight:bold">=</span> /var/lib/mysql
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#008080">sql_mode</span><span style="color:#000;font-weight:bold">=</span>STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>symbolic-links<span style="color:#000;font-weight:bold">=</span><span style="color:#099">0</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#008080">secure_file_priv</span> <span style="color:#000;font-weight:bold">=</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#008080">wait_timeout</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">120</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#008080">interactive_timeout</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">120</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>default-time_zone <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#39;+8:00&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>skip-external-locking
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>skip-name-resolve
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#008080">open_files_limit</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">10240</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#008080">max_connections</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1000</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#008080">max_connect_errors</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">6000</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#008080">table_open_cache</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">800</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#008080">max_allowed_packet</span> <span style="color:#000;font-weight:bold">=</span> 40m
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#008080">sort_buffer_size</span> <span style="color:#000;font-weight:bold">=</span> 2M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#008080">join_buffer_size</span> <span style="color:#000;font-weight:bold">=</span> 1M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#008080">thread_cache_size</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">32</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span><span style="color:#008080">query_cache_size</span> <span style="color:#000;font-weight:bold">=</span> 64M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span><span style="color:#008080">transaction_isolation</span> <span style="color:#000;font-weight:bold">=</span> READ-COMMITTED
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span><span style="color:#008080">tmp_table_size</span> <span style="color:#000;font-weight:bold">=</span> 128M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span><span style="color:#008080">max_heap_table_size</span> <span style="color:#000;font-weight:bold">=</span> 128M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span>log-bin <span style="color:#000;font-weight:bold">=</span> mysql-bin
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>sync-binlog <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span><span style="color:#008080">binlog_format</span> <span style="color:#000;font-weight:bold">=</span> ROW
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span><span style="color:#008080">binlog_cache_size</span> <span style="color:#000;font-weight:bold">=</span> 1M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span><span style="color:#008080">key_buffer_size</span> <span style="color:#000;font-weight:bold">=</span> 128M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span><span style="color:#008080">read_buffer_size</span> <span style="color:#000;font-weight:bold">=</span> 2M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span><span style="color:#008080">read_rnd_buffer_size</span> <span style="color:#000;font-weight:bold">=</span> 4M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span><span><span style="color:#008080">bulk_insert_buffer_size</span> <span style="color:#000;font-weight:bold">=</span> 64M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span><span><span style="color:#008080">lower_case_table_names</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span><span><span style="color:#008080">explicit_defaults_for_timestamp</span><span style="color:#000;font-weight:bold">=</span><span style="color:#0086b3">true</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span><span><span style="color:#008080">skip_name_resolve</span> <span style="color:#000;font-weight:bold">=</span> ON
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span><span><span style="color:#008080">event_scheduler</span> <span style="color:#000;font-weight:bold">=</span> ON
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span><span style="color:#008080">log_bin_trust_function_creators</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span><span style="color:#008080">innodb_buffer_pool_size</span> <span style="color:#000;font-weight:bold">=</span> 512M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span><span><span style="color:#008080">innodb_flush_log_at_trx_commit</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span><span><span style="color:#008080">innodb_file_per_table</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">1</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span><span><span style="color:#008080">innodb_log_buffer_size</span> <span style="color:#000;font-weight:bold">=</span> 4M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span><span><span style="color:#008080">innodb_log_file_size</span> <span style="color:#000;font-weight:bold">=</span> 256M
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span><span><span style="color:#008080">innodb_max_dirty_pages_pct</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">90</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span><span><span style="color:#008080">innodb_read_io_threads</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">4</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span><span><span style="color:#008080">innodb_write_io_threads</span> <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">4</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55</span><span><span style="color:#998;font-style:italic"># docker-compose文件：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56</span><span><span style="color:#998;font-style:italic"># cat docker-compose.yaml</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57</span><span>version: <span style="color:#d14">&#39;3.1&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58</span><span>services:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59</span><span>  db:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60</span><span>    image: mysql:5.7 <span style="color:#998;font-style:italic">#mysql版本</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61</span><span>    volumes:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62</span><span>      - ./.data/db:/var/lib/mysql
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63</span><span>      - ./.etc/my.cnf:/etc/mysql/mysql.conf.d/mysqld.cnf
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64</span><span>    restart: always
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65</span><span>    ports:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66</span><span>      - 3306:3306
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67</span><span>    environment:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68</span><span>      MYSQL_ROOT_PASSWORD: <span style="color:#099">123456</span> <span style="color:#998;font-style:italic">#访问密码</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69</span><span>      secure_file_priv:
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70</span><span><span style="color:#998;font-style:italic"># 新版本docker 使用已经不适用docker-compose 单独命令，docker-compose的编排能力已经集成至docker 命令下。 </span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71</span><span><span style="color:#998;font-style:italic"># docker compose up -d </span>
</span></span></code></pre></div><h2 id="二-mysql-创建用户于赋权限">二 、Mysql 创建用户于赋权限</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#998;font-style:italic"># 创建用户</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span>create user <span style="color:#d14">&#39;kid&#39;</span>@<span style="color:#d14">&#39;%&#39;</span> identified by <span style="color:#d14">&#39;kidlee123&#39;</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#998;font-style:italic"># mysql用户权限赋值</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>grant all on *.* to <span style="color:#d14">&#39;kid&#39;</span>@<span style="color:#d14">&#39;%&#39;</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span>revoke all on *.* from <span style="color:#d14">&#39;kid&#39;</span>@<span style="color:#d14">&#39;%&#39;</span>;
</span></span></code></pre></div><h2 id="三mysql--导入数据">三、Mysql  导入数据</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#998;font-style:italic"># CRUD数据模拟导入</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#998;font-style:italic"># 下载test.sql</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span>curl -O
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span>https://raw.githubusercontent.com/ssslkj123/shuanglu.life/master/post/20240516_SQL%E9%80%9F%E6%88%90/test.sql
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#998;font-style:italic"># 导入至库</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span>mysql -uroot -p123456 -h 192.168.31.14 -P <span style="color:#099">3306</span> &lt;  test.sql
</span></span></code></pre></div><h2 id="四-随便查点啥">四、 随便查点啥</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#099">1</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>id;<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="五-范围查找逻辑表达式显示过滤">五、 范围查找、逻辑表达式，显示过滤</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#998;font-style:italic">/* 获取recordsets  |  querysets */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>test.e.emp_no,<span style="color:#bbb"> </span>concat(<span style="color:#bbb"> </span>e.first_name<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>e.last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>fullname<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>test.employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>e<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">!=</span><span style="color:#099">10003</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>test.e.emp_no,<span style="color:#bbb"> </span>concat(<span style="color:#bbb"> </span>e.first_name<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>e.last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>name<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>test.employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>e<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">!=</span><span style="color:#099">10003</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/*  &lt;&gt; SQL 标准的 不等于 ，等价于 !=  */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>test.e.emp_no,<span style="color:#bbb"> </span>concat(<span style="color:#bbb"> </span>e.first_name<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>e.last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>name<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>test.employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>e<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">&lt;&gt;</span><span style="color:#bbb"> </span><span style="color:#099">10003</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/*  between */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>test.e.emp_no,<span style="color:#bbb"> </span>concat(<span style="color:#bbb"> </span>e.first_name<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>e.last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>name<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>test.employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>e<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">between</span><span style="color:#bbb">  </span><span style="color:#099">10004</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">and</span><span style="color:#bbb"> </span><span style="color:#099">10010</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 拿3条， 跳过前3个。 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">   </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>e<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">limit</span><span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">offset</span><span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">   </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>e<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">limit</span><span style="color:#bbb"> </span><span style="color:#099">3</span>,<span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* limit 按照sql 语句需要在where 条件之后  */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>e<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">limit</span><span style="color:#bbb"> </span><span style="color:#099">3</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">offset</span><span style="color:#bbb"> </span><span style="color:#099">2</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="六模糊查询like">六、模糊查询<code>like</code></h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#998;font-style:italic">/* 这里不可以用Fullname 作为 like的条件。 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb">  </span>first_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">like</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;C%&#39;</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">   </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb">  </span>last_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">like</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;_en__&#39;</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#998;font-style:italic">% 代表0或者N个字符
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span><span style="color:#998;font-style:italic"># _ 代表1个字符
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span><span style="color:#998;font-style:italic">*/</span><span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="七-查看sql语句执行计划">七、 查看sql语句执行计划</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#000;font-weight:bold">explain</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>employees;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/*
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#998;font-style:italic">Type字段：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#998;font-style:italic">ALL 全表扫描，效率最低
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#998;font-style:italic">range 范围索引，效率较高
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#998;font-style:italic">index 使用了索引
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#998;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#998;font-style:italic">rows字段：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#998;font-style:italic">一共有多少行
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#998;font-style:italic">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#998;font-style:italic">filtered：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#998;font-style:italic">查找出来了之后过滤了的百分比。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#998;font-style:italic">*/</span><span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="八创建索引">八、创建索引</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#998;font-style:italic">/* 查询当前的索引 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">show</span><span style="color:#bbb"> </span>indexes<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>employees;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 创建索引 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">create</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">index</span><span style="color:#bbb"> </span>last_name_index<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">using</span><span style="color:#bbb"> </span>btree<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">on</span><span style="color:#bbb"> </span>employees<span style="color:#bbb"> </span>(last_name);<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* %开始则会是全表扫描 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">explain</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb">   </span>last_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">like</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;%B%&#39;</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 使用的是索引 */</span><span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">explain</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb">   </span>last_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">like</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;B%&#39;</span><span style="color:#bbb">  </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 如果不建索引 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb"></span>mysql<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">explain</span><span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb">   </span>last_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">like</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;B%&#39;</span><span style="color:#bbb">  </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>id<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>select_type<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">table</span><span style="color:#bbb">     </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>partitions<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">type</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>possible_keys<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">key</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>key_len<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ref</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">rows</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>filtered<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Extra<span style="color:#bbb">       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">SIMPLE</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb">       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ALL</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb">          </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">   </span><span style="color:#099">20</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">    </span><span style="color:#099">11</span>.<span style="color:#099">11</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">Using</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+------+---------------+------+---------+------+------+----------+-------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#998;font-style:italic"></span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">row</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">in</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">set</span>,<span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span>warning<span style="color:#bbb"> </span>(<span style="color:#099">0</span>.<span style="color:#099">00</span><span style="color:#bbb"> </span>sec)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 创建索引后 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#bbb"></span>mysql<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">explain</span><span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb">   </span>last_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">like</span><span style="color:#bbb"> </span><span style="color:#d14">&#39;B%&#39;</span><span style="color:#bbb">  </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+-------+-----------------+-----------------+---------+------+------+----------+-----------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>id<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>select_type<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">table</span><span style="color:#bbb">     </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>partitions<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">type</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>possible_keys<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">key</span><span style="color:#bbb">             </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>key_len<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ref</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">rows</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>filtered<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Extra<span style="color:#bbb">                 </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+-------+-----------------+-----------------+---------+------+------+----------+-----------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">SIMPLE</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb">       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>range<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>last_name_index<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>last_name_index<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#099">50</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">    </span><span style="color:#099">3</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">   </span><span style="color:#099">100</span>.<span style="color:#099">00</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">Using</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">index</span><span style="color:#bbb"> </span>condition<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+-------+-----------------+-----------------+---------+------+------+----------+-----------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#998;font-style:italic"></span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">row</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">in</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">set</span>,<span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span>warning<span style="color:#bbb"> </span>(<span style="color:#099">0</span>.<span style="color:#099">00</span><span style="color:#bbb"> </span>sec)<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="九where条件查询">九、<code>where</code>条件查询</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">in</span><span style="color:#bbb"> </span>(<span style="color:#099">10001</span>,<span style="color:#099">10002</span>,<span style="color:#099">10004</span>)<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="十order排序">十、<code>order</code>排序</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span>mysql<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">between</span><span style="color:#bbb"> </span><span style="color:#099">10012</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">and</span><span style="color:#bbb"> </span><span style="color:#099">10020</span><span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">order</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">by</span><span style="color:#bbb"> </span>first_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">desc</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">--------+----------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">             </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">--------+----------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10012</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Patricio<span style="color:#bbb"> </span>Bridgland<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10020</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Mayuko<span style="color:#bbb"> </span>Warwick<span style="color:#bbb">       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10019</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Lillian<span style="color:#bbb"> </span>Haddadi<span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10016</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Kazuhito<span style="color:#bbb"> </span>Cappelletti<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10018</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Kazuhide<span style="color:#bbb"> </span>Peha<span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10015</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Guoxiang<span style="color:#bbb"> </span>Nooteboom<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10013</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Eberhardt<span style="color:#bbb"> </span>Terkki<span style="color:#bbb">     </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10017</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Cristinel<span style="color:#bbb"> </span>Bouloucos<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">10014</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Berni<span style="color:#bbb"> </span>Genin<span style="color:#bbb">          </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">--------+----------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#998;font-style:italic"></span><span style="color:#099">9</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">rows</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">in</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">set</span><span style="color:#bbb"> </span>(<span style="color:#099">0</span>.<span style="color:#099">00</span><span style="color:#bbb"> </span>sec)<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#bbb"></span>mysql<span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">explain</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb">  </span>emp_no,concat(first_name,<span style="color:#d14">&#34; &#34;</span><span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>last_name)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>Fullname<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb">  </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">between</span><span style="color:#bbb"> </span><span style="color:#099">10012</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">and</span><span style="color:#bbb"> </span><span style="color:#099">10020</span><span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">order</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">by</span><span style="color:#bbb"> </span>first_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">desc</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>id<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>select_type<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">table</span><span style="color:#bbb">     </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>partitions<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">type</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>possible_keys<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">key</span><span style="color:#bbb">     </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>key_len<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ref</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">rows</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>filtered<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>Extra<span style="color:#bbb">                       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">  </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">SIMPLE</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb">       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span>range<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">PRIMARY</span><span style="color:#bbb">       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">PRIMARY</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#099">4</span><span style="color:#bbb">       </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">    </span><span style="color:#099">9</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">   </span><span style="color:#099">100</span>.<span style="color:#099">00</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">Using</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">where</span>;<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">Using</span><span style="color:#bbb"> </span>filesort<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">|</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">+</span><span style="color:#998;font-style:italic">----+-------------+-----------+------------+-------+---------------+---------+---------+------+------+----------+-----------------------------+
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#998;font-style:italic"></span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">row</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">in</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">set</span>,<span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span>warning<span style="color:#bbb"> </span>(<span style="color:#099">0</span>.<span style="color:#099">00</span><span style="color:#bbb"> </span>sec)<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="十一复合主键索引查询">十一、复合主键、索引，查询</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#000;font-weight:bold">CREATE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">TABLE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>dept_emp<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>(<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>emp_no<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">int</span>(<span style="color:#099">11</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>dept_no<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">char</span>(<span style="color:#099">4</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>from_date<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">date</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">`</span>to_date<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#0086b3">date</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">PRIMARY</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">KEY</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>emp_no<span style="color:#000;font-weight:bold">`</span>,<span style="color:#000;font-weight:bold">`</span>dept_no<span style="color:#000;font-weight:bold">`</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">KEY</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>dept_no<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>dept_no<span style="color:#000;font-weight:bold">`</span>),<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">CONSTRAINT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>dept_emp_ibfk_1<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FOREIGN</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">KEY</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>emp_no<span style="color:#000;font-weight:bold">`</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">REFERENCES</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>employees<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>emp_no<span style="color:#000;font-weight:bold">`</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DELETE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">CASCADE</span>,<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">CONSTRAINT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>dept_emp_ibfk_2<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FOREIGN</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">KEY</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>dept_no<span style="color:#000;font-weight:bold">`</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">REFERENCES</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">`</span>departments<span style="color:#000;font-weight:bold">`</span><span style="color:#bbb"> </span>(<span style="color:#000;font-weight:bold">`</span>dept_no<span style="color:#000;font-weight:bold">`</span>)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DELETE</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">CASCADE</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb"></span>)<span style="color:#bbb"> </span>ENGINE<span style="color:#000;font-weight:bold">=</span>InnoDB<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DEFAULT</span><span style="color:#bbb"> </span>CHARSET<span style="color:#000;font-weight:bold">=</span>utf8;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 这里的PRIMARY KEY (`emp_no`,`dept_no`)  则表示使用了复合主键作为索引。*/</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 主键是唯一的、复合主键也是唯一的，但是唯一键不一定是主键。*/</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">from</span><span style="color:#bbb"> </span>dept_emp<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>emp<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">order</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">by</span><span style="color:#bbb"> </span>dept_no,emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="十二distinct-的使用">十二、distinct 的使用，</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">DISTINCT</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>salaries;<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="十三countmaxminavgsum-聚合函数的使用">十三、count、max、min、avg、sum 聚合函数的使用。</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#000;font-weight:bold">select</span>  emp_no,max<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> as max ,avg<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> as avg  from  <span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">select</span>  emp_no,salary from salaries<span style="color:#000;font-weight:bold">)</span> as s ;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#998;font-style:italic"># 不加索引全表扫描：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>mysql&gt; explain <span style="color:#000;font-weight:bold">select</span>  emp_no,max<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> as max ,avg<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> as avg  from  <span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">select</span>  emp_no,salary from salaries<span style="color:#000;font-weight:bold">)</span> as s ;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>+----+-------------+----------+------------+------+---------------+------+---------+------+------+----------+-------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>| id | select_type | table    | partitions | <span style="color:#0086b3">type</span> | possible_keys | key  | key_len | ref  | rows | filtered | Extra |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>+----+-------------+----------+------------+------+---------------+------+---------+------+------+----------+-------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>|  <span style="color:#099">1</span> | SIMPLE      | salaries | NULL       | ALL  | NULL          | NULL | NULL    | NULL |   <span style="color:#099">40</span> |   100.00 | NULL  |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>+----+-------------+----------+------------+------+---------------+------+---------+------+------+----------+-------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#099">1</span> row in set, <span style="color:#099">1</span> warning <span style="color:#000;font-weight:bold">(</span>0.00 sec<span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#998;font-style:italic"># 添加salaries列索引</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>create index salary_index using btree on salaries<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span>;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#998;font-style:italic"># 命中索引：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>mysql&gt; explain <span style="color:#000;font-weight:bold">select</span>  emp_no,max<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> as max ,avg<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> as avg  from  <span style="color:#000;font-weight:bold">(</span><span style="color:#000;font-weight:bold">select</span>  emp_no,salary from salaries<span style="color:#000;font-weight:bold">)</span> as s ;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>+----+-------------+----------+------------+-------+---------------+--------------+---------+------+------+----------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>| id | select_type | table    | partitions | <span style="color:#0086b3">type</span>  | possible_keys | key          | key_len | ref  | rows | filtered | Extra       |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>+----+-------------+----------+------------+-------+---------------+--------------+---------+------+------+----------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>|  <span style="color:#099">1</span> | SIMPLE      | salaries | NULL       | index | NULL          | salary_index | <span style="color:#099">4</span>       | NULL |   <span style="color:#099">40</span> |   100.00 | Using index |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>+----+-------------+----------+------------+-------+---------------+--------------+---------+------+------+----------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#099">1</span> row in set, <span style="color:#099">1</span> warning <span style="color:#000;font-weight:bold">(</span>0.00 sec<span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><h2 id="十四group-by-分组">十四、group by 分组</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#000;font-weight:bold">select</span> emp_no,max<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span>,min<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span>  from  salaries group by emp_no;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>+--------+-------------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>| emp_no | max<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> | min<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>+--------+-------------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>|  <span style="color:#099">10001</span> |       <span style="color:#099">88958</span> |       <span style="color:#099">60117</span> |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>|  <span style="color:#099">10002</span> |       <span style="color:#099">72527</span> |       <span style="color:#099">65828</span> |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>|  <span style="color:#099">10003</span> |       <span style="color:#099">43699</span> |       <span style="color:#099">40006</span> |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>|  <span style="color:#099">10004</span> |       <span style="color:#099">60770</span> |       <span style="color:#099">40054</span> |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>+--------+-------------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#099">4</span> rows in <span style="color:#0086b3">set</span> <span style="color:#000;font-weight:bold">(</span>0.00 sec<span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>SELECT  count<span style="color:#000;font-weight:bold">(</span>emp_no<span style="color:#000;font-weight:bold">)</span> as salary_month , SUM<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> as total_salary, emp_no as  employees_id FROM salaries GROUP BY emp_no;
</span></span></code></pre></div><h2 id="十五having-用法">十五、having 用法</h2>
<p>PS：<strong>mysql可以将别名放在having</strong> 之后，在group by 统计之后，针对查询的不存在的值进行过滤的 条件判断方法，过滤完的结果不可以使用where 条件来进行过滤。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span>emp_no,<span style="color:#000;font-weight:bold">SUM</span>(salary),<span style="color:#000;font-weight:bold">AVG</span>(salary)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>avg_salary,<span style="color:#000;font-weight:bold">COUNT</span>(emp_no)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">GROUP</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">HAVING</span><span style="color:#bbb">  </span>avg_salary<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">60000</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span>emp_no,<span style="color:#000;font-weight:bold">SUM</span>(salary),<span style="color:#000;font-weight:bold">AVG</span>(salary)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>avg_salary,<span style="color:#000;font-weight:bold">COUNT</span>(emp_no)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">GROUP</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">HAVING</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">AVG</span>(salary)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">60000</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span>emp_no,<span style="color:#000;font-weight:bold">SUM</span>(salary),<span style="color:#000;font-weight:bold">AVG</span>(salary)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>avg_salary,<span style="color:#000;font-weight:bold">COUNT</span>(emp_no)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">GROUP</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span>emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">HAVING</span><span style="color:#bbb">  </span>avg_salary<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb"> </span><span style="color:#099">49000</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">ORDER</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb">  </span>avg_salary<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">LIMIT</span><span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">OFFSET</span><span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span></code></pre></div><h2 id="十六子查询">十六、子查询</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#998;font-style:italic"># 子查询军需要通过() 内查询到结果。</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#998;font-style:italic"># 1、通过sql语句产生一个临时表，从其中进行进一步的查询，由于临时表没有表名所以需要用as产生一个</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>SELECT * FROM  <span style="color:#000;font-weight:bold">(</span>  SELECT  salary,to_date from salaries where emp_no &lt; <span style="color:#099">10002</span>  <span style="color:#000;font-weight:bold">)</span>  as sa  where sa.salary &lt; 70000;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#998;font-style:italic"># 2、通过in 的方式批量指定条件，这种方式需要确定查询出来的结果只有一类结果，类似golang的切片。</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>/* 查找工资小于60000的并按照员工号进行分组，得到员工ID，将员工ID 作为过滤条件，交给主查询语句进行查询后统计这些数据分别有多少条，并使用员工ID进行分组。输出。*/
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span>SELECT  count<span style="color:#000;font-weight:bold">(</span>emp_no<span style="color:#000;font-weight:bold">)</span>,emp_no,max<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span>,min<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span>,avg<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span>  FROM  salaries   WHERE emp_no IN <span style="color:#000;font-weight:bold">(</span> SELECT emp_no FROM salaries where salary &lt; <span style="color:#099">60000</span>   GROUP BY emp_no  <span style="color:#000;font-weight:bold">)</span> GROUP BY emp_no ; 
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span>+---------------+--------+-------------+-------------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>| count<span style="color:#000;font-weight:bold">(</span>emp_no<span style="color:#000;font-weight:bold">)</span> | emp_no | max<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> | min<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> | avg<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span>+---------------+--------+-------------+-------------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span>|             <span style="color:#099">7</span> |  <span style="color:#099">10003</span> |       <span style="color:#099">43699</span> |       <span style="color:#099">40006</span> |  43030.2857 |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span>|            <span style="color:#099">10</span> |  <span style="color:#099">10004</span> |       <span style="color:#099">60770</span> |       <span style="color:#099">40054</span> |  49571.7000 |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span>+---------------+--------+-------------+-------------+-------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span>/* 找每个人的最高工资的子查询。*/
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span>SELECT *  FROM salaries WHERE  salary IN  <span style="color:#000;font-weight:bold">(</span> SELECT MAX<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> FROM salaries GROUP BY emp_no  <span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span>+--------+--------+------------+------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span>| emp_no | salary | from_date  | to_date    |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span>+--------+--------+------------+------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span>|  <span style="color:#099">10001</span> |  <span style="color:#099">88958</span> | 2002-06-22 | 9999-01-01 |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span>|  <span style="color:#099">10002</span> |  <span style="color:#099">72527</span> | 2001-08-02 | 9999-01-01 |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span>|  <span style="color:#099">10003</span> |  <span style="color:#099">43699</span> | 2000-12-01 | 2001-12-01 |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span>|  <span style="color:#099">10004</span> |  <span style="color:#099">60770</span> | 1995-11-29 | 1996-11-28 |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span>+--------+--------+------------+------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span><span style="color:#998;font-style:italic"># 3、通过 = 的方式来实现单值的表达式。</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span>/* 查找某个人所有薪水当中 最高工资的那条记录
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span> SELECT *  FROM salaries WHERE  <span style="color:#008080">salary</span> <span style="color:#000;font-weight:bold">=</span>  <span style="color:#000;font-weight:bold">(</span> SELECT MAX<span style="color:#000;font-weight:bold">(</span>salary<span style="color:#000;font-weight:bold">)</span> FROM salaries   <span style="color:#000;font-weight:bold">)</span> */
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span><span style="color:#998;font-style:italic"># 在= 号之后只可能是单一的值，而不是类似于 IN 的 切片数据类型的数据。</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span> +--------+--------+------------+------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span>| emp_no | salary | from_date  | to_date    |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span>+--------+--------+------------+------------+
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span>|  <span style="color:#099">10001</span> |  <span style="color:#099">88958</span> | 2002-06-22 | 9999-01-01 |
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span>+--------+--------+------------+------------+
</span></span></code></pre></div><h2 id="十七多表join">十七、多表join</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-mysql" data-lang="mysql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#998;font-style:italic"># 1、 全表连接，笛卡尔乘积（强烈禁止），employees 数据为 20条，salaries 的数据为40条。 此时会产生 full join的效果 产生20*40=800条记录。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">COUNT</span>(<span style="color:#000;font-weight:bold">*</span>)<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb">  </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">COUNT</span>(<span style="color:#000;font-weight:bold">*</span>)<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb"> </span>FULL<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb">  </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees,salaries<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 2、 内连接 INNER JOIN 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#998;font-style:italic"></span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 3、 左连接 这里的左等于是 employees 的表,右边相当于 salaries 表。当出现employees 当中连接不不存在匹配记录的时候则 产生的结果当中会以空来进行替代。 由于右边的表 salaries.emp_no 只有4种不同的值，因此左边的表employees会有20-4=16条记录无法匹配的上，最终结果为16 + 40 = 56条记录出来。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">LEFT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#900;font-weight:bold">count</span>(<span style="color:#000;font-weight:bold">*</span>)<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">LEFT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">LEFT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb">  </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb">  </span><span style="color:#099">10003</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">LEFT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb">  </span>employees.first_name<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb">  </span><span style="color:#d14">&#34;Bezalel&#34;</span><span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 理解过程如下： 使用left join 之后将两个表产生一个全新的表，再到该全新的表上面 去使用group by等方式进行更进一步的处理。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#998;font-style:italic"># 此外由于是left join 所以会出现salaries_count2 列数值为0 、  MAX(salaries.salary) 列为 Null 的情况。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#900;font-weight:bold">COUNT</span>(employees.emp_no)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>employees_count1<span style="color:#bbb"> </span>,<span style="color:#900;font-weight:bold">COUNT</span>(salaries.emp_no)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>salaries_count2<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>employees.first_name,<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">MAX</span>(salaries.salary)<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">LEFT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb">  </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb">  </span><span style="color:#099">10002</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">GROUP</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 4、 右链接 这里的左等于是 employees 的表,右边相当于 salaries 表。此时以salaries 表为主，当出现左边表内无法 employees.emp_no = salaries.emp_no  的值时，则会将值进行 丢弃处理。此时 会产生 40条记录。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">RIGHT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#900;font-weight:bold">count</span>(<span style="color:#000;font-weight:bold">*</span>)<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">RIGHT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 5、 需要注意的是 mysql当中可以不用指定 left join ... on 或者 right join  ... on 而直接使用join ... where 的方式进行 进行表的内联，如：
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">and</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb">  </span><span style="color:#099">10002</span><span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">GROUP</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 此时 只使用了join 并没有指定 join的类型， 后通过WHERE 条件 进行了对比，得到结果并进行了group by 操作，由于没有指定Join 类型，此时只会出来2条记录。但是salary的结果逻辑是没有意义的，salary还需要做更多的聚合函数处理。
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb">  </span><span style="color:#900;font-weight:bold">COUNT</span>(employees.emp_no)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>employees_count1<span style="color:#bbb"> </span>,<span style="color:#900;font-weight:bold">COUNT</span>(salaries.emp_no)<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">as</span><span style="color:#bbb"> </span>salaries_count2<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span>employees.first_name,<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">MAX</span>(salaries.salary)<span style="color:#bbb"> </span>,<span style="color:#900;font-weight:bold">AVG</span>(salaries.salary)<span style="color:#bbb"> </span>,<span style="color:#bbb"> </span><span style="color:#900;font-weight:bold">MIN</span>(salaries.salary)<span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb">   </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">where</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>salaries.emp_no<span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">and</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">&gt;</span><span style="color:#bbb">  </span><span style="color:#099">10002</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">GROUP</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">BY</span><span style="color:#bbb"> </span>employees.emp_no<span style="color:#bbb"> </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic"># 6、 自然连接（Natural Join，不建议使用，该方式为非显示逻辑）与使用join where employees.emp_no = salaries.emp_no 类似，会让两个表自动使用主键进行关联，并除空值的部分。 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span><span style="color:#998;font-style:italic"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>employees<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NATURAL</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb"> </span>salaries;<span style="color:#bbb"> 
</span></span></span></code></pre></div><p>特殊表：<strong>自连接</strong>（同一张表内实现了层级的逻辑关系，如：部门当中领导与同事之间在同一张表当中。）</p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#998;font-style:italic"># 创建表：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span>CREATE TABLE <span style="color:#d14">`</span>manager<span style="color:#d14">`</span> <span style="color:#000;font-weight:bold">(</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span>  <span style="color:#d14">`</span>empno<span style="color:#d14">`</span> int<span style="color:#000;font-weight:bold">(</span>11<span style="color:#000;font-weight:bold">)</span> NOT NULL AUTO_INCREMENT,
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span>  <span style="color:#d14">`</span>name<span style="color:#d14">`</span> varchar<span style="color:#000;font-weight:bold">(</span>255<span style="color:#000;font-weight:bold">)</span> DEFAULT NULL,
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span>  <span style="color:#d14">`</span>mgr<span style="color:#d14">`</span> int<span style="color:#000;font-weight:bold">(</span>11<span style="color:#000;font-weight:bold">)</span> DEFAULT NULL,
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span>  PRIMARY KEY <span style="color:#000;font-weight:bold">(</span><span style="color:#d14">`</span>empno<span style="color:#d14">`</span><span style="color:#000;font-weight:bold">)</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#000;font-weight:bold">)</span> <span style="color:#008080">ENGINE</span><span style="color:#000;font-weight:bold">=</span>InnoDB <span style="color:#008080">AUTO_INCREMENT</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span> DEFAULT <span style="color:#008080">CHARSET</span><span style="color:#000;font-weight:bold">=</span>utf8mb4;
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#998;font-style:italic"># 插入数据模拟：</span>
</span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span>INSERT  INTO manager<span style="color:#000;font-weight:bold">(</span> empno,<span style="color:#d14">`</span>name<span style="color:#d14">`</span>,mgr <span style="color:#000;font-weight:bold">)</span> VALUES <span style="color:#000;font-weight:bold">(</span>1,<span style="color:#d14">&#34;tom&#34;</span>,NULL<span style="color:#000;font-weight:bold">)</span>,<span style="color:#000;font-weight:bold">(</span>2,<span style="color:#d14">&#34;jerry&#34;</span>,1<span style="color:#000;font-weight:bold">)</span>,<span style="color:#000;font-weight:bold">(</span>3,<span style="color:#d14">&#34;ben&#34;</span>,2<span style="color:#000;font-weight:bold">)</span>,<span style="color:#000;font-weight:bold">(</span>4,<span style="color:#d14">&#34;kili&#34;</span>,2<span style="color:#000;font-weight:bold">)</span>,<span style="color:#000;font-weight:bold">(</span>5,<span style="color:#d14">&#34;lucy&#34;</span>,2<span style="color:#000;font-weight:bold">)</span>
</span></span></code></pre></div><p>逻辑关系：</p>
<p>
        <a data-fancybox="gallery" href="./image-20240516215959073.png">
            <img class="mx-auto" alt="image-20240516215959073" src="./image-20240516215959073.png" />
        </a>
    </p>
<p>
        <a data-fancybox="gallery" href="./image-20240516220159850.png">
            <img class="mx-auto" alt="image-20240516220159850" src="./image-20240516220159850.png" />
        </a>
    </p>
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span><span style="color:#998;font-style:italic">/* 查全表 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>manager;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 查询没有mgr id的这个人即为最大的boss */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>manager<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>mgr<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">IS</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NOT</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">NULL</span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 这里通过内联查询查询到该表当中的上下级关系，其中jerry 是 tom的 mgr ，jerry 没有上级， jerry是ben的上级 */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 使用内联模式查询谁是boss */</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">select</span><span style="color:#bbb"> </span>emp.<span style="color:#000;font-weight:bold">*</span>,worker.<span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb">  </span>manager<span style="color:#bbb">  </span>emp<span style="color:#bbb"> </span>,manager<span style="color:#bbb">  </span>worker<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>emp.empno<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>worker.mgr<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">AND</span><span style="color:#bbb"> </span>emp.empno<span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>;<span style="color:#bbb"> 
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">/* 使用内联模式查询谁是底层员工*/</span><span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span>emp.<span style="color:#000;font-weight:bold">*</span>,worker.<span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>manager<span style="color:#bbb"> </span>emp<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">INNER</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb">  </span>manager<span style="color:#bbb"> </span>worker<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>emp.empno<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>worker.mgr<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>emp.empno<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">2</span><span style="color:#bbb">  </span>;<span style="color:#bbb">
</span></span></span><span style="display:flex;"><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">SELECT</span><span style="color:#bbb"> </span>worker.<span style="color:#000;font-weight:bold">*</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">FROM</span><span style="color:#bbb"> </span>manager<span style="color:#bbb"> </span>emp<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">INNER</span><span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">JOIN</span><span style="color:#bbb">  </span>manager<span style="color:#bbb"> </span>worker<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">ON</span><span style="color:#bbb"> </span>emp.empno<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span>worker.mgr<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">WHERE</span><span style="color:#bbb"> </span>emp.empno<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">=</span><span style="color:#bbb"> </span><span style="color:#099">2</span><span style="color:#bbb">  </span>;<span style="color:#bbb">
</span></span></span></code></pre></div>

	    

<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://ssslkj123.github.io/css/gitalk.css">
<link rel="stylesheet" href="https://ssslkj123.github.io/css/gitalk/comment.css">

<script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
<script src="https://ssslkj123.github.io/js/md5.min.js"></script>
<script type="text/javascript">
      var gitalk = new Gitalk({
        clientID: '9bbccf93efbc67caca32',
        clientSecret: '208da9c1b3eccad0b7ca35b2faa27390e4982e64',
        repo: 'ssslkj123.github.io',
        owner: 'ssslkj123',
        admin: 'ssslkj123',
        id: md5(location.pathname), 
        distractionFreeMode: false 
      });
     (function() {
       if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
         document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
         return;
       }
       gitalk.render('gitalk-container');
     })();
</script>




        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://shuanglu.life/">Kid</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://shuanglu.life/post/20240516_SQL%E9%80%9F%E6%88%90/">https://shuanglu.life/post/20240516_SQL%E9%80%9F%E6%88%90/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>
<div style="padding: 10px 0; margin: 20px auto; width: 100%; font-size:16px; text-align: center;">
    <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
        <span>打赏</span></button>
    <div id="QR" style="display: none;">
        <div id="wechat" style="display: inline-block">
            <a class="fancybox" rel="group">
                <img id="wechat_qr" src="https://github.com/ssslkj123/shuanglu.life/blob/master/images/wx.png?raw=true" alt="WeChat Pay"></a>
            <p>微信打赏</p>
        </div>
        <div id="alipay" style="display: inline-block">
            <a class="fancybox" rel="group">
                <img id="alipay_qr" src="https://github.com/ssslkj123/shuanglu.life/blob/master/images/zfb.png?raw=true" alt="Alipay"></a>
            <p>支付宝打赏</p>
        </div>
    </div>
</div>



        


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/SQL'>SQL</a></li>
                
                <li><a href='/tags/%E6%95%B0%E6%8D%AE%E5%BA%93'>数据库</a></li>
                
            </ul>
            
        </div>
    </article>
    
    <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "your github repo"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    

</div>

                    <footer id="footer">
    <div>
        &copy; 2024 <a href="https://shuanglu.life/">Shuanglu的博客 By Kid</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        
    </div>
	
    <script src="/js/clipboard.js"></script>
	
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script><script src="https://cdn.bootcdn.net/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js"></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>


                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://shuanglu.life/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://shuanglu.life/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://shuanglu.life/post/20240516_SQL%E9%80%9F%E6%88%90/" title="20240516_速成SQL">20240516_速成SQL</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20240420_getopts%E8%84%9A%E6%9C%AC%E7%9A%84%E4%BD%BF%E7%94%A8/" title="20240420_getopts脚本模板">20240420_getopts脚本模板</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20240416_python%E6%89%8B%E6%90%93http%E6%9C%8D%E5%8A%A1%E5%99%A8/" title="20240416_Python手搓Http服务器">20240416_Python手搓Http服务器</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20240410_pod%E5%A6%82%E4%BD%95%E8%8E%B7%E5%BE%97IP%E5%9C%B0%E5%9D%80/" title="20240410_pod如何获取IP地址">20240410_pod如何获取IP地址</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20240206_github%E5%A4%A7%E6%96%87%E4%BB%B6commit/" title="20240206_github大文件commit">20240206_github大文件commit</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20240110_golang%E6%8E%92%E5%BA%8F/" title="20240110_golang排序">20240110_golang排序</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20230807_eci%E4%B8%8Eswagent%E9%97%AE%E9%A2%98%E5%A4%84%E7%BD%AE%E6%96%B9%E5%BC%8F/" title="20230807_eci与swagent问题处置方式">20230807_eci与swagent问题处置方式</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20230727_velero%E5%A4%87%E4%BB%BD%E8%BF%81%E7%A7%BBkubernetes%E9%9B%86%E7%BE%A4/" title="20230727_velero备份迁移kubernetes集群">20230727_velero备份迁移kubernetes集群</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20230309_KuriseRollout%E5%AE%9E%E7%8E%B0%E7%9A%84%E7%81%B0%E5%BA%A6%E5%8F%91%E5%B8%83/" title="20230309_KuriseRollout灰度发布">20230309_KuriseRollout灰度发布</a>
    </li>
    
    <li>
        <a href="https://shuanglu.life/post/20230113_docker.sock%E6%9E%84%E5%BB%BA%E9%95%9C%E5%83%8F/" title="20230113_docker.sock构建镜像">20230113_docker.sock构建镜像</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://shuanglu.life/categories/1.10&#43;/">1.10&#43; (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/CNI/">CNI (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/docker/">Docker (3)</a></li>
    
    <li><a href="https://shuanglu.life/categories/dockerfile/">Dockerfile (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/etcd/">Etcd (2)</a></li>
    
    <li><a href="https://shuanglu.life/categories/git/">Git (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/github/">Github (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/golang/">Golang (2)</a></li>
    
    <li><a href="https://shuanglu.life/categories/Harbor/">Harbor (2)</a></li>
    
    <li><a href="https://shuanglu.life/categories/IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/">IO多路复用 (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/KruiseRollout/">KruiseRollout (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/Kubernetes/">Kubernetes (6)</a></li>
    
    <li><a href="https://shuanglu.life/categories/Linux/">Linux (3)</a></li>
    
    <li><a href="https://shuanglu.life/categories/openkruise/">Openkruise (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/openssl/">Openssl (2)</a></li>
    
    <li><a href="https://shuanglu.life/categories/os/">Os (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/Python/">Python (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/shell/">Shell (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/SQL/">SQL (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/systemd/">Systemd (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/velero/">Velero (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/web/">Web (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程 (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/%E5%AE%B9%E5%99%A8%E5%9F%BA%E7%A1%80/">容器基础 (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C/">容器网络 (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库 (1)</a></li>
    
    <li><a href="https://shuanglu.life/categories/%E6%A8%A1%E6%9D%BF/">模板 (1)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://shuanglu.life/tags/CNI/">CNI</a>
    
    <a href="https://shuanglu.life/tags/docker/">Docker</a>
    
    <a href="https://shuanglu.life/tags/dockerfile/">Dockerfile</a>
    
    <a href="https://shuanglu.life/tags/etcd/">Etcd</a>
    
    <a href="https://shuanglu.life/tags/git/">Git</a>
    
    <a href="https://shuanglu.life/tags/github/">Github</a>
    
    <a href="https://shuanglu.life/tags/golang/">Golang</a>
    
    <a href="https://shuanglu.life/tags/Haproxy/">Haproxy</a>
    
    <a href="https://shuanglu.life/tags/IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/">IO多路复用</a>
    
    <a href="https://shuanglu.life/tags/k8s/">K8s</a>
    
    <a href="https://shuanglu.life/tags/KruiseRollout/">KruiseRollout</a>
    
    <a href="https://shuanglu.life/tags/Kubernete/">Kubernete</a>
    
    <a href="https://shuanglu.life/tags/Linux/">Linux</a>
    
    <a href="https://shuanglu.life/tags/nginx/">Nginx</a>
    
    <a href="https://shuanglu.life/tags/os/">Os</a>
    
    <a href="https://shuanglu.life/tags/Python/">Python</a>
    
    <a href="https://shuanglu.life/tags/shell/">Shell</a>
    
    <a href="https://shuanglu.life/tags/skywalking-swck-mutating-webhook-configuration/">Skywalking-Swck-Mutating-Webhook-Configuration</a>
    
    <a href="https://shuanglu.life/tags/SQL/">SQL</a>
    
    <a href="https://shuanglu.life/tags/velero/">Velero</a>
    
    <a href="https://shuanglu.life/tags/%E4%BC%98%E5%8C%96/">优化</a>
    
    <a href="https://shuanglu.life/tags/%E5%8D%87%E7%BA%A7%E9%94%99%E8%AF%AF/">升级错误</a>
    
    <a href="https://shuanglu.life/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a>
    
    <a href="https://shuanglu.life/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
    
    <a href="https://shuanglu.life/tags/%E6%A8%A1%E6%9D%BF/">模板</a>
    
    <a href="https://shuanglu.life/tags/%E8%AF%81%E4%B9%A6/">证书</a>
    
    <a href="https://shuanglu.life/tags/%E8%BD%AC%E6%8D%A2/">转换</a>
    
    <a href="https://shuanglu.life/tags/%E9%80%9A%E7%94%A8%E7%9F%A5%E8%AF%86/">通用知识</a>
    
    <a href="https://shuanglu.life/tags/%E9%95%9C%E5%83%8F%E4%BB%93%E5%BA%93/">镜像仓库</a>
    
    <a href="https://shuanglu.life/tags/%E9%97%AE%E9%A2%98/">问题</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://shuanglu.live" title="Shuanglu的博客">Shuanglu的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="http://docs.kubernetes.org.cn/" title="kubernetes相关指南">Kubernetes指南</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://shuanglu.life/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>